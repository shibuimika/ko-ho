# Ko-Ho

企業広報チーム向けAI統合プレスリリース管理システム

## 🚀 概要

Ko-Hoは、企業広報チームの業務効率化を目的としたWebアプリケーションです。記者データベースとコンテンツデータベースを連携し、AI技術を活用した自動タグ付け、マッチングスコア算出、レコメンド文章生成により、プレスリリースの開封率・取材率向上を実現します。

## ✨ 主要機能

### 📊 ダッシュボード
- 統計情報の可視化
- 最近のアクティビティ表示
- AI推薦メール一覧
- **NEW**: インタビュー依頼一覧

### 👥 記者管理
- 記者情報のCRUD操作
- 詳細プロフィール管理
- SNS情報管理

### 📄 コンテンツ管理
- プレスリリースのCRUD操作
- ステータス管理（下書き・公開済み・アーカイブ）
- AI処理結果表示
- **NEW**: インタビュー依頼機能

### 🤖 AI機能
- **自動タグ付け**: コンテンツを分析して関連タグを自動生成
- **マッチングスコア算出**: 記者とコンテンツの適合度を数値化
- **レコメンド文章生成**: 個別記者向けのパーソナライズされたメール文面を自動作成
- **NEW**: **インタビュー依頼文生成**: 記者のプロフィールとコンテンツに基づいた個別化されたインタビュー依頼文を自動作成

### 📧 メール管理
- 推薦メールの送信
- 送信履歴管理
- 開封率追跡
- **NEW**: インタビュー依頼の送信・管理

### 🎤 インタビュー依頼機能 (NEW)
- **記者選定**: マッチングスコア順での記者候補表示
- **AI依頼文生成**: 個別化されたインタビュー依頼文の自動作成
- **トーン設定**: 丁寧・カジュアル・緊急の3つのトーンから選択
- **プレビュー機能**: 送信前の依頼文確認
- **ステータス管理**: 下書き・送信済み・承諾・拒否のステータス管理
- **一元管理**: ダッシュボードでの依頼状況一覧表示

## 🛠 技術スタック

- **フロントエンド**: Next.js 14, TypeScript, Tailwind CSS
- **バックエンド**: Next.js API Routes
- **データベース**: SQLite (開発環境) + Prisma ORM
- **AI機能**: Qwen-3連携
- **UI**: React Hook Form, Headless UI, Heroicons

## 📦 インストール

```bash
# リポジトリをクローン
git clone https://github.com/jokerjunya/ko-ho.git
cd ko-ho

# 依存関係をインストール
npm install

# 環境変数を設定
cp .env.example .env
# .envファイルを編集してDATABASE_URLを設定

# データベースをセットアップ
npx prisma db push
npx prisma db seed

# 開発サーバーを起動
npm run dev
```

## 🔧 環境変数

```env
DATABASE_URL="file:./prisma/dev.db"
QWEN_MODEL_PATH="public/ai/ADK_qwen3" # ← AIモデルのパス（デフォルトはpublic/ai/ADK_qwen3）
```

### AIモデルパスの注意
- デフォルトでは `public/ai/ADK_qwen3` を参照します。
- 独自のモデルを利用する場合は `QWEN_MODEL_PATH` を`.env`に設定してください。
- モデルファイルが存在しない場合はエラーとなるため、必要に応じてサンプルやダミーファイルを配置してください。

## 📚 API エンドポイント

### 記者API
- `GET /api/reporters` - 記者一覧取得
- `POST /api/reporters` - 新規記者作成
- `GET /api/reporters/[id]` - 記者詳細取得
- `PUT /api/reporters/[id]` - 記者情報更新
- `DELETE /api/reporters/[id]` - 記者削除

### コンテンツAPI
- `GET /api/contents` - コンテンツ一覧取得
- `POST /api/contents` - 新規コンテンツ作成
- `GET /api/contents/[id]` - コンテンツ詳細取得
- `PUT /api/contents/[id]` - コンテンツ更新
- `DELETE /api/contents/[id]` - コンテンツ削除

### AI処理API
- `POST /api/ai/process-content` - AI統合処理実行

### インタビュー依頼API (NEW)
- `GET /api/interview-requests` - インタビュー依頼一覧取得
- `POST /api/interview-requests` - 新規インタビュー依頼作成
- `PUT /api/interview-requests/[id]` - インタビュー依頼ステータス更新

### その他API
- `GET /api/tags` - タグ一覧取得
- `GET /api/matching-scores` - マッチングスコア取得
- `POST /api/mail/send` - メール送信

## 🎯 使用方法

### 基本フロー
1. **記者管理**: `/reporters` で記者情報を管理
2. **コンテンツ作成**: `/contents/new` で新規プレスリリースを作成
3. **AI処理**: コンテンツ詳細ページでAI処理を実行
4. **メール送信**: ダッシュボードから推薦メールを送信

### インタビュー依頼フロー (NEW)
1. **コンテンツ選択**: コンテンツ詳細ページで「インタビュー依頼」ボタンをクリック
2. **記者選定**: マッチングスコア順で表示される記者候補から選択
3. **トーン設定**: 依頼文のトーン（丁寧・カジュアル・緊急）を選択
4. **AI生成**: 記者のプロフィールとコンテンツに基づいた個別化された依頼文を自動生成
5. **プレビュー**: 生成された依頼文を確認・編集
6. **送信**: 記者に依頼を送信
7. **管理**: ダッシュボードで依頼状況を一元管理

## 📁 プロジェクト構造

```
ko-ho/
├── src/
│   ├── app/                 # Next.js App Router
│   │   ├── api/            # API Routes
│   │   │   ├── interview-requests/  # インタビュー依頼API (NEW)
│   │   │   ├── reporters/  # 記者API
│   │   │   ├── contents/   # コンテンツAPI
│   │   │   └── ai/        # AI処理API
│   │   ├── reporters/      # 記者管理ページ
│   │   ├── contents/       # コンテンツ管理ページ
│   │   └── analytics/      # 分析ページ
│   ├── components/         # Reactコンポーネント
│   │   ├── contents/       # コンテンツ関連コンポーネント
│   │   │   └── reporter-selection-modal.tsx  # 記者選定モーダル (NEW)
│   │   ├── dashboard/      # ダッシュボードコンポーネント
│   │   └── layout/         # レイアウトコンポーネント
│   ├── lib/               # ユーティリティ関数
│   └── types/             # TypeScript型定義
├── prisma/                # データベーススキーマ
├── docs/                  # ドキュメント
└── scripts/              # セットアップスクリプト
```

## 🔄 開発フロー

### 従来のフロー
1. コンテンツ作成
2. AI処理実行（自動タグ付け・マッチング）
3. 記者選定
4. メール送信
5. 効果測定

### インタビュー依頼フロー (NEW)
1. コンテンツ作成
2. AI処理実行（自動タグ付け・マッチング）
3. **インタビュー依頼作成**
4. **記者選定（マッチングスコア順）**
5. **AI依頼文生成**
6. **依頼送信**
7. **依頼状況管理**

## 📈 AI処理フロー

### 基本処理
1. **コンテンツ分析**: タイトル・要約・本文を解析
2. **タグ生成**: 関連キーワードを自動抽出
3. **マッチング**: 記者の専門分野と照合
4. **スコア算出**: 適合度を0-100点で数値化
5. **文章生成**: 個別最適化されたメール文面を作成

### インタビュー依頼処理 (NEW)
1. **記者プロフィール分析**: 記者の専門分野・所属・過去記事を分析
2. **コンテンツ適合性評価**: コンテンツと記者の興味・専門性の適合度を評価
3. **マッチング理由生成**: なぜこの記者に依頼するのかの理由を自動生成
4. **個別化依頼文作成**: 記者の特性に合わせた依頼文を生成
5. **トーン調整**: 選択されたトーンに応じて文体を調整

## 🎯 開発状況

### ✅ 完了済み機能
- **Phase 1**: 基盤構築（Next.js、データベース、型定義）
- **Phase 2**: 基本機能実装（記者・コンテンツCRUD）
- **Phase 3**: AI機能統合（自動タグ付け、マッチング、レコメンド生成）
- **Phase 4**: 高度機能（編集・削除、メール送信、分析機能）
- **Phase 5**: **インタビュー依頼機能** (NEW)
  - ✅ データベーススキーマ拡張
  - ✅ インタビュー依頼API実装
  - ✅ 記者選定モーダル実装
  - ✅ AI依頼文生成機能
  - ✅ ダッシュボード統合
  - ✅ ステータス管理機能

### 📊 実装済みデータ
- 記者: 4名のサンプルデータ
- コンテンツ: 3件のサンプルプレスリリース
- タグ: 12種類（AI・機械学習、DX・デジタル変革、IT業界等）
- **NEW**: インタビュー依頼: 実際の依頼データ（テスト済み）

### 🔧 動作確認済み機能
- ✅ 記者候補の自動選定（マッチングスコア順）
- ✅ AI依頼文の自動生成（個別化対応）
- ✅ 依頼のステータス管理（下書き→送信済み）
- ✅ ダッシュボードでの一元管理
- ✅ プレビュー機能

## 🚀 新機能の特徴

### インタビュー依頼機能の革新性
1. **AI駆動の記者選定**: 従来の手動選定から、AIによる適合度評価に基づく自動選定
2. **個別化された依頼文**: 記者の専門分野や過去の記事傾向を分析した個別最適化
3. **効率的なワークフロー**: 3ステップ（選定→生成→送信）の直感的な操作
4. **統合管理**: 推薦メールとインタビュー依頼の一元管理

### 期待される効果
- **作業時間短縮**: 従来の手動作業から自動化により80%の時間短縮
- **取材率向上**: 個別化された依頼文により取材承諾率の向上
- **品質向上**: AIによる適合度評価により、より適切な記者選定
- **管理効率化**: 依頼状況の可視化により進捗管理の効率化

## 🤝 貢献

プルリクエストやイシューの報告を歓迎します。

## 📄 ライセンス

このプロジェクトはMITライセンスの下で公開されています。

## 📞 サポート

質問や問題がある場合は、GitHubのIssueを作成してください。

## 📝 GitHub運用・開発フローの注意

- `.env`や`.env.example`などの環境変数ファイルは**git管理から除外**されています。必要に応じて各自で作成・編集してください。
- プルリクエスト（PR）作成時は、`main`ブランチではなく**feature/xxx**や**fix/xxx**などのブランチで作業し、内容を明記したPRを作成してください。
- 個人情報や機密情報が含まれるファイルは**絶対にコミットしない**ようご注意ください。
- 詳細な運用ルールやコントリビュート手順は、必要に応じて`docs/`ディレクトリやWikiにまとめてください。 